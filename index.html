<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>随机触发系统</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI";
    background: #111;
    color: #fff;
    text-align: center;
    padding: 20px;
  }
  h2 { margin-top: 30px; }
  button {
    background: #333;
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 8px;
    font-size: 16px;
  }
  button:hover {
    background: #555;
  }
</style>
</head>
<body>

<h1>随机触发系统</h1>

<button onclick="randomTrigger()">随机触发时机</button>

<div id="triggers"></div>
<div id="effects"></div>

<script>
// ==================== ① 触发时机中文名（30 个） ====================
const triggerNames = {
  T01:"你使用牌后", T02:"其他角色对你使用牌后", T03:"出牌阶段开始时", T04:"你受到伤害后", T05:"准备阶段",
  T06:"结束阶段", T07:"你造成伤害后", T08:"你成为【杀】的目标时", T09:"一名角色进入濒死时", T10:"你失去装备牌后",
  T11:"你使用或打出【闪】时", T12:"当一张判定牌生效前", T13:"你失去手牌后", T14:"你使用的牌被抵消后", T15:"一名其他角色死亡后",
  T16:"当一张判定牌生效后", T17:"【南蛮入侵】或【万箭齐发】结算后", T18:"你使用【杀】造成伤害后", T19:"你于回合外失去红色牌后", T20:"弃牌阶段开始时",
  T21:"一名角色受到【杀】的伤害后", T22:"摸牌阶段开始时", T23:"你成为普通锦囊牌的目标后", T24:"一名角色进入连环状态后", T25:"一名角色受到属性伤害后",
  T26:"一名角色失去最后的手牌后", T27:"你的体力值变化后", T28:"每轮开始时", T29:"一名角色造成伤害时", T30:"一名角色受到伤害时"
};

// ==================== ② 触发效果中文名（30 个） ====================
const effectNames = {
  E01:"你可以摸1张牌", E02:"你可以弃置一名角色区域内的一张牌", E03:"你可以观看牌堆顶的3张牌，以任意顺序置于牌堆顶或牌堆底", E04:"你可以弃置任意张牌，摸等量张牌",
  E05:"你可以获得造成伤害的牌", E06:"你可以视为使用一张无距离次数限制的【杀】", E07:"你可以获得一名角色区域内的一张牌", E08:"你可以回复1点体力",
  E09:"你可以摸3张牌，弃置1张牌", E10:"你可以摸牌至体力上限，至多摸5张", E11:"你可令一名角色非锁定技失效直到其下个回合开始", E12:"你可以令一名角色摸2张牌并翻面",
  E13:"你可令此牌对你无效", E14:"你可以令一名其他角色判定，若结果为黑桃，你对其造成2点雷电伤害", E15:"你可以用一张手牌替换判定牌",
  E16:"你可以获得此判定牌", E17:"若你不是体力上限最高的角色，你可增加1点体力上限", E18:"你可与一名已受伤角色拼点，若你赢，你获得其两张牌",
  E19:"你可令至多两名角色各摸一张牌", E20:"你可令一名角色的手牌上限+2直到其回合结束",
  E21:"你可获得两张非基本牌", E22:"你可获得两张锦囊牌", E23:"你可以摸4张牌井翻面",
  E24:"你可令你对一名角色使用牌无次数或距离限制直到你的回合结束", E25:"你可以弃置两张牌，令你和一名其他角色回复1点体力",
  E26:"你可令此伤害值+1", E27:"你可以失去1点体力，摸3张牌", E28:"你可交换两名角色装备区的牌",
  E29:"你可交换两名角色手牌区的牌", E30:"你可防止此伤害，令伤害来源摸3张牌"
};

// ==================== ③ 触发时机 → 可用效果规则（30 组） ====================
const triggerMap = {
  T01:["E01","E02","E03","E04","E05","E06","E20"],
  T02:["E01","E02","E03","E04","E05","E06","E20"],
  T03:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T04:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T05:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T06:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T07:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T08:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T09:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T10:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T11:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T12:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T13:["E01","E02","E03","E04","E05","E06","E20"],
  T14:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T15:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T16:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T17:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T18:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T19:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T20:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T21:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T22:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T23:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T24:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T25:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T26:["E09","E10","E11","E12","E21","E22","E24","E28","E29"],
  T27:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T28:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T29:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
  T30:["E07","E08","E13","E14","E15","E16","E17","E18","E19","E23","E25","E26","E27","E30"],
};

// ==================== 工具函数 ====================
function randomPick(arr, n) {
  return [...arr].sort(() => 0.5 - Math.random()).slice(0, n);
}

// ==================== 随机触发时机 ====================
function randomTrigger() {
  document.getElementById("effects").innerHTML = "";
  const keys = Object.keys(triggerMap);
  const picks = randomPick(keys, 3);
  const box = document.getElementById("triggers");
  box.innerHTML = "<h2>选择触发时机</h2>";

  picks.forEach(t => {
    const btn = document.createElement("button");
    btn.innerText = triggerNames[t];
    btn.onclick = () => randomEffect(t);
    box.appendChild(btn);
  });
}

// ==================== 随机触发效果 ====================
function randomEffect(trigger) {
  const effects = triggerMap[trigger];
  const picks = randomPick(effects, 3);
  const box = document.getElementById("effects");
  box.innerHTML = `<h2>${triggerNames[trigger]} → 选择触发效果</h2>`;

  picks.forEach(e => {
    const btn = document.createElement("button");
    btn.innerText = effectNames[e];
    box.appendChild(btn);
  });
}
</script>

</body>
</html>
